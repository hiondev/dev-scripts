#!/bin/bash

if [ "$1" = "help" ]; then
    echo "Import a database to the local container"
    exit
fi

DATABASE_NAME=$1
FILENAME=$2
if [ -z $DATABASE_NAME ] || [ -z $FILENAME ]; then
    echo "Usage: $0 <database name> <filename>"
    echo
    echo "Container DB databases:"
    $SCRIPT_PATH/dev/run-command exec --no-TTY db mysql --user=root --skip-column-names <<< "show databases;"
    exit
fi

$SCRIPT_PATH/exec --no-TTY db \
    mysql --user=root --one-database \
    $DATABASE_NAME < $FILENAME
